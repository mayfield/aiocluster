<!DOCTYPE html>
<html>
    <head>
        <title>AIOCluster - Diagnostics</title>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

        <link rel="stylesheet" type="text/css" href="bower_components/semantic/dist/semantic.css">
        <link rel="stylesheet" type="text/css" href="style/site.css">
        <script src="bower_components/jquery/dist/jquery.js"></script>
        <script src="bower_components/moment/moment.js"></script>
        <script src="bower_components/jsrender/jsrender.js"></script>
        <script src="bower_components/semantic/dist/semantic.js"></script>
        <script src="bower_components/chart.js/dist/Chart.bundle.js"></script>
        <script src="src/common.js"></script>
        <script src="src/memory.js"></script>
        <script id="procs-template" type="text/x-jsrender">
            <table class="ui table">
                <thead>
                    <tr>
                        <th>Worker</th>
                        <th>PID</th>
                        <th>Status</th>
                        <th>Memory</th>
                        <th>CPU</th>
                        <th>Age</th>
                    </tr>
                </thead>
                <tbody>
                    {{for workers}}
                        <tr>
                            <td><i class="user icon"></i><sup>{{:ident}}</sup></td>
                            <td>{{:pid}}</td>
                            <td>{{:status}}</td>
                            <td>{{*console.log(this);}} MB</td>
                            <td>{{*:Math.round(cpu_percent * 100)}}%</td>
                            <td><time >{{*:window.moment.duration(age, 'seconds').humanize()}}</time></td>
                        </tr>
                    {{/for}}
              </tbody>
            </table>
        </script>
    </head>
    <body>

        <!-- Header Bar -->
        <div class="ui fixed inverted red menu">
            <div class="ui container">
                <a href="/" class="header item">
                    <img class="logo" src="assets/images/logo.png">
                    AIOCluster
                </a>
                <div class="section ui simple dropdown item">Memory Tracker<i class="dropdown icon"></i>
                    <div class="menu">
                      <a class="item" href="profiler.html">Performance Profiler</a>
                      <a class="item" href="/">Processes</a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Body -->
        <div class="ui main container">
            <div class="ui statistics">
                <div class="statistic">
                    <div class="label">Workers</div>
                    <div class="value">
                        <i class="users icon"></i>
                        <span id="worker-count">-</span>
                    </div>
                </div>
                <div class="statistic">
                    <div class="label">Memory</div>
                    <div class="value">
                        <span id="mem-usage">-</span>MB
                    </div>
                </div>
                <div class="statistic">
                    <div class="label">CPU</div>
                    <div class="value">
                        <span id="cpu-usage">-</span>%
                    </div>
                </div>
            </div>
            <h1 class="ui header">Processes</h1>
            <div id="procs-holder"></div>
        </div>

        <!-- footer -->
        <div class="ui inverted vertical footer segment">
          <div class="ui horizontal inverted medium divided link list">
            <a class="item" href="https://github.com/mayfield/aiocluster">GitHub</a>
          </div>
        </div>
      </div>
    </body>
</html>
